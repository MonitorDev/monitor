Fn.fW('VM.DL',{Const:function(a,b,c,d){VM.Base.call(this,a);},Extend:[VM.Base],Helper:{boxall:function(a,b){js.each($.f_el(a.form,b),'v.checked = '+a.checked);}},Prototype:{type:'dl',eA:12,ez:12,aK:'selectItem',hH:null,design:function(a,b,_0,_1,_2,_3){this.eA=this.xi('@vspace');this.ez=this.xi('@hspace');var c=b.getAttribute('cols'),d=this.div=a.addset('cols='+c,_0,_1,_2,_3);for(var i=0,l=d.scales.length,e;i<l;i++){e=i<l-1?this.ez:0;d.addNode(new Fn.DivFlow(null,d.scales[i],-1,'','padding-right:'+e+'px;',e));}for(var i=0,g=this.xs('fr');i<d.length;i++)this.parentNode.frame2div(d[i],g.item(i));this.portal=this.xt('pub/portal/@src');this.cols=d.length;return d;},data:function(){},set_col:function(a,r){var f=this.div,b='cols='+js.s_rpt('*',a),c=this.ez;if(this.cols>a){var d=f[a-1];for(var i=a;i<this.cols;i++){while(f[i][0].length){for(var j=0,g=0;j<a;j++){if(f[j][0].length<f[g][0].length)g=j;}f[g][0].additem(f[i][0][0]);}}d.set_prop(null,{paddingRight:0},null,0);f.resize(-1,-1,b);}else if(this.cols<a){var d=f[f.length-1];d.set_prop(null,{paddingRight:c+'px'},null,c);f.resize(-1,-1,b);for(var i=0,e,h;i<a;i++){for(var j=this.cols-1,g=this.cols-1;j>=0;j--){if(f[j][0].length>f[g][0].length)g=j;}e=i<a-1?c:0;h=i<this.cols?f[i][0]:f.addflow(null,'','padding-right:'+e+'px',e).addflow().render();if(f[g][0].length>1&&f[i][0].length==0){h.additem(f[g][0][f[g][0].length-1]);}}}if(this.cols!=a){for(var i=0,k,l=f.length,s='col='+l;i<l;i++){if((k=f[i]).length)for(j=0;j<k[0].length;j++)s+='&col'+k.nodeIndex+'='+VM(k[0][j],true).pkid;}this.cols=a;this.x().setAttribute('cols',b);this.cmd({tagName:'ajax',src:(r||this.portal)+'&'+s});}},reset:function(){VM.Base.prototype.reset.call(this);}}});Fn.fW('VM.UL',{Const:function(a){VM.Base.call(this,a);this.pkid=$.xt(a,'pub/pk');},Helper:{tgover:function(a){a.src=a.src.replace(/\.gif/,'_hover.gif');},tgout:function(a){a.src=a.src.replace(/_hover.gif/,'.gif');},drag:function(a){if(event.srcElement.tagName!='DIV')return;var b=VM._a[a],c=b.div.$(),d=$.offrec(c),e=b.aos('dl'),f=e.div,x=event.clientX,y=event.clientY,g=d.left-x,h=d.top-y,t=e.eA,m,u,v,w;if(!e.portal)return;if(!Br.ie)$.r_s().collapse();DFish.htc.on();$.e_moveup(c,function(){var n=event.clientX,o=event.clientY;c.style.posLeft=n+g;c.style.posTop=o+h;if(!m){if(n!=x||o!=y){m=[];c.style.position='absolute';c.style.filter='alpha(opacity=60)';for(var i=0,p,q;i<f.length;i++){p=f[i][0];q=$.bcr(p.$());m.push([q.left,q.right,[]]);for(var j=0,r;j<p.length;j++){if(p[j]==b.div){m.$=$.before(c,'<div class=bd-mid style="margin-bottom:'+t+'px;width:'+(c.wd-2)+'px;height:'+(d.height-2-t)+'px;border-style:dashed;"></div>');r=$.bcr(m.$);}else r=$.bcr(p[j].$());m[i][2].push([r.top-t,r.bottom]);}}}}else{for(var i=0;i<m.length;i++){if(n>m[i][0]&&n<=m[i][1]){for(var j=0,p=m[i][2],q,r;j<p.length;j++){q=p[j];r=(q[0]+q[1])/2;if(o>q[0]&&o<=r){break;}else if(o>r&&o<=q[1]){j++;break;}}p=f[i][0];if(p[j]){if(p[j].$()!=m.$.nextSibling)p.$('cont').insertBefore(m.$,p[j].$());}else{if(p.$('cont').lastChild!=m.$)p.$('cont').appendChild(m.$);}u=i;v=j;break;}}}if(n=DFish.htc.g_pos(n,o)){if((o=window[n])&&(o=Fn.Oper._a[o.id])){if(o instanceof Fn.OperTab){if(o.parentNode.gz!=o.nodeIndex){o.clk();DFish.htc.on();$.rm(m.$);delete m.$;var _p=b.aos();m=_p.x('.//fr[@id="'+o.parentNode.x.film+'"]/fr['+(o.nodeIndex+1)+']');if(m.getAttribute('type')!='dl')m=$.x(a,'.//fr[@type="dl"]');$.x(m,'fr').appendChild(b.x());m=m.getAttribute('id');for(var i=0;i<_p.length;i++){if(_p[i].frid==m){e=_p[i];f=e.div;break;}}m=f[0][0];m.$('cont').insertBefore(c,m[0]?m[0].$():null);m.addNode(b.div,0);m=null;c.setCapture();}}}}},function(){if(m){if(u!=null&&v!=null){var j=b.div.parentNode.parentNode.nodeIndex,k=b.div.nodeIndex;for(var i=p=0;i<u;i++)p+=f[i].length;f[u][0].additem(f[j][0][k],v);var s='col='+m.length;for(var i=0;i<f.length;i++){k=f[i];for(j=0;j<k[0].length;j++)s+='&col'+k.nodeIndex+'='+VM(k[0][j],true).pkid;}b.cmd({tagName:'ajax',src:e.portal+'&'+s});}m.$.removeNode(true);m.$=null;delete m.$;}DFish.htc.off();c.style.position='static';c.style.filter='';});}},Extend:[VM.Base],Prototype:{type:'ul',eD:false,aa:true,design:function(a,b){var c=this.x('ancestor::fr[@type="dl"]'),d=$.xi(c,'@vspace');this.div=a;return this.aos().frame2div(this.div.addset('rows=*','','padding-bottom:'+d+'px',0,d),$.x(b,'fr'));},data:function(){var a=this.xt('@dragfr');if(a){a=this.aos().bM[a];if(a){var b=this.xt('ancestor::fr[@type="dl"]/pub/portal/@src');if(b){a.attr+=' onmousedown=VM.UL.drag("'+this.id+'")';a.css='cursor:move;'+a.css;}}}}}}); 