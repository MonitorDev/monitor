Fn.fW('VM.RL',{Const:function(a){VM.Base.call(this,a);},Extend:[VM.Base],Helper:{},Prototype:{type:'rl',format:'yyyy-mm-dd',design:function(a,b,_0,_1,_2,_3){this.face=this.xt('@face');this.upsrc=this.xt('upsrc');this.date=this.xt('date');this.start=this.xi('start');this.cg=this.xi('cg');this.fcs=this.xt('focus');this.pad=this.xi('css/@pad');this.clk=this.xt('event/@clk');this.std=this.xi('css/@std');this.val=this.xt('css/@v');this.ttclz=this.xt('titleClass')||'bg-low';this.fclz=this.xt('focusClass')||'bg-mid';this.css={};var t=this.xt('earliest');if(t)this.earliest=js.d_ps(t);js.each(this.xs('css/*'),['$0[v.tagName]=[v.text,v.getAttribute("cls"),v.getAttribute("clk")]',this.css]);while(this.date.length<10)this.date+='-02';switch(this.face){case 'day':this.aT=new Fn.Calendar(this);break;case 'week':this.aT=new Fn.WeekCal(this);break;case 'month':this.aT=new Fn.MonthCal(this);break;case 'year':this.aT=new Fn.YearCal(this);break;}this.div=a.add(_0,_1,_2,_3);return this.div;},setDate:function(a){this.aT.dt=typeof a==='string'?js.d_ps(a):a;this.aT.jump();},data:function(){this.div.data(this.aT.html());},getSelected:function(){return this.fcs;},focus:function(a,b){this.aT.focus(a,b)},click:function(a){this.aT.click(a)},show:function(){$.toggle(this.div.parentNode.$(),true)},hide:function(){$.toggle(this.div.parentNode.$(),false)},reset:function(){VM.Base.prototype.reset.call(this);this.aT.dispose();this.aT=this.face=this.src=this.date=this.auto=this.pad=this.val=this.css=null;delete this.aT;delete this.face;delete this.src;delete this.date;delete this.auto;delete this.val;delete this.css;this.div=null;}}}); 